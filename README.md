# Vortex - Автономный Фронтенд-Клон

Этот репозиторий содержит фронтенд веб-игры "Vortex" с минимально необходимыми модификациями для его автономной работы. Оригинальная модульная структура сборки Webpack сохранена для упрощения анализа и интеграции с новым бэкендом.

## Запуск (Локальный Демо-Режим)

1.  Установите [Node.js](https://nodejs.org/).
2.  Откройте терминал в корневой папке проекта.
3.  Установите Prettier для форматирования кода:
    ```bash
    npm install --save-dev --save-exact prettier
    ```
4.  Запустите **Live Server** (например, через расширение в VS Code) для файла `index.html`.

Игра запустится в браузере с эмулированной авторизацией и балансом `9,999,999`. Все игровые действия (ставки) обрабатываются локально без отправки на сервер.

## Архитектура и Технологии

*   **Сборщик:** Webpack
*   **Фреймворк:** Preact (легковесная альтернатива React)
*   **Управление состоянием:** MobX
*   **Сетевые запросы:** Axios
*   **Real-time:** Centrifuge (на базе WebSocket)
*   **Графика/Анимация:** PixiJS, pixi-spine
*   **Локализация:** react-i18next

## Карта Ключевых Модулей и Файлов

Ниже приведено описание ключевых файлов, отвечающих за основную логику приложения.

#### Точка входа и загрузчик
*   **Файл:** `index.9480c28da0a805029a18.js`
*   **Роль:** Является "runtime" кодом Webpack. Его задача — асинхронно подгружать все остальные модули (чанки) в правильном порядке. **Не содержит игровой логики.**

#### Управление состоянием (MobX Stores)
*   **Файл:** `src_vortex_store_ProfileCommon_ts...js`
    *   **Роль:** Управляет состоянием пользователя. Хранит `profile.balance`, `userAuthenticated`, данные профиля.
    *   **МОДИФИКАЦИЯ:** Метод `auth(t)` в этом файле был заменен на заглушку для эмуляции успешной авторизации и установки начального баланса.
*   **Файл:** `src_vortex_game_vortex_store_VortexGame_ts...js`
    *   **Роль:** "Сердце" игры. Управляет состоянием игрового раунда: `gameState`, `roundId`, `amount`, `payout`, `coefficient`.
    *   **МОДИФИКАЦИЯ:** Не модифицировался напрямую, но его работа теперь зависит от фейковых данных, получаемых от API-заглушки.

#### Сетевое взаимодействие (API)
*   **Файл:** `src_vortex_modules_api_index_ts...js`
    *   **Роль:** Содержит функции-обертки над Axios для всех HTTP-запросов к бэкенду.
    *   **МОДИФИКАЦИЯ:** Функция `aL(t)` (обфусцированное имя для `placeBet`) была заменена на заглушку, которая возвращает `Promise.resolve` с фейковым, случайно сгенерированным результатом игры.
*   **Файл:** `vendors-node_modules_axios_lib_axios_js...js`
    *   **Роль:** Сторонняя библиотека Axios. **Не модифицировался.**
*   **Файл:** `vendors-node_modules_centrifuge_dist_centrifuge_js...js`
    *   **Роль:** Сторонняя библиотека Centrifuge для WebSocket. **Не модифицировался**, но его вызовы блокируются в `ProfileCommon`.

#### UI и Компоненты (Preact)
*   **Файл:** `src_vortex_game_vortex_bootstrap_tsx...js`
    *   **Роль:** Корневой компонент приложения. Инициализирует сторы (хранилища) и рендерит основные страницы.
*   **Файл:** `src_vortex_game_vortex_components_PageMain_index_ts...js`
    *   **Роль:** Компонент главной игровой страницы. Содержит кнопки "Place Bet", поля ввода и т.д., которые вызывают `actions` в MobX-сторах.

#### Аналитика (Исключено)
*   **Файл:** `gtm.js`
*   **Роль:** Скрипт Google Tag Manager для сбора аналитики.
*   **МОДИФИКАЦИЯ:** Скрипт был **удален** из `index.html` для изоляции приложения.

---

### План Интеграции с Бэкендом

Для подключения этого фронтенда к вашему бэкенду необходимо восстановить оригинальную логику в двух ключевых местах:

1.  **Восстановить авторизацию:**
    *   В файле `src_vortex_store_ProfileCommon_ts...js` найдите метод `auth(t)`.
    *   Замените текущую заглушку на оригинальную логику, которая выполняет `fetchProfile` и инициирует соединение через `centrifuge.connect()` с вашим WebSocket-сервером, используя полученный токен.

2.  **Восстановить API-запрос для ставки:**
    *   В файле `src_vortex_modules_api_index_ts...js` найдите функцию `aL(t)`.
    *   Замените текущую заглушку на оригинальный вызов `axios.post('/api/bets/place', ...)`
    *   Убедитесь, что ваш бэкенд возвращает ответ в той же структуре, которую ожидает `VortexGame` стор (включая `id`, `payout`, `coefficient`, `balance`, `state` и т.д.).