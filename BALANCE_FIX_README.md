# Исправление проблемы с балансом в игре Vortex

## Проблемы, которые были исправлены:

### 1. Ошибка JWT токена
**Проблема**: `Invalid argument passed to jwtDecode. Expected type 'string', received 'undefined'`

**Решение**: 
- Создан правильный JWT токен с корректной структурой
- Добавлено поле `sub` для WebSocket подписки
- Обновлены как Service Worker, так и Flask сервер

### 2. Баланс показывал 0
**Проблема**: Игра не могла получить данные о балансе из-за ошибки с токеном

**Решение**:
- Исправлен JWT токен в мок-ответах
- Улучшен WebSocket мок для передачи данных о балансе
- Добавлены дополнительные API endpoints

### 3. WebSocket мок
**Проблема**: WebSocket не передавал данные о балансе

**Решение**:
- Добавлена имитация обновления баланса через WebSocket
- Улучшена подписка на канал `balance_ticket`
- Добавлена автоматическая отправка данных о балансе при подписке

## Изменения в файлах:

### mock-service-worker.js
- Обновлен JWT токен в `/api/common/profile`
- Добавлены новые API endpoints: `/api/profile`, `/api/common/limits`, `/api/common/rates`

### websocket-mock.js
- Добавлена имитация обновления баланса в методе `send()`
- Улучшена подписка на канал баланса в Centrifuge моке
- Добавлена автоматическая отправка данных о балансе

### app.py
- Обновлен JWT токен с правильной структурой
- Добавлено поле `sub` в payload токена
- Улучшено создание JWT токена

## Результат:
Теперь игра должна правильно отображать баланс 99,999,900 FUN и не показывать ошибки JWT в консоли.

## Для тестирования:
1. Перезагрузите страницу игры
2. Проверьте консоль браузера - ошибки JWT должны исчезнуть
3. Баланс должен отображаться как 99,999,900 FUN
